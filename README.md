# Домашнее задание к занятию "Микросервисы: принципы"

---

### Задание 1 API Gateway


Предложите решение для обеспечения реализации API Gateway. Составьте сравнительную таблицу возможностей различных программных решений. На основе таблицы сделайте выбор решения.

Решение должно соответствовать следующим требованиям:

- маршрутизация запросов к нужному сервису на основе конфигурации,
- возможность проверки аутентификационной информации в запросах,
- обеспечение терминации HTTPS.
Обоснуйте свой выбор.

### Решение:

Для реализации API Gateway в микросервисной архитектуре я рассмотрел несколько популярных решений. Ниже представлена сравнительная таблица возможностей различных программных решений:


|Решение      |Маршрутизация запросов|Аутентификация|Терминация HTTPS|Модель распространения|
|-------------|----------------------|--------------|----------------|----------------------|
| Kong        |  ✓|✓|✓|Открытый исходный код|
| NGINX       | ✓|✓|✓ | Открытый исходный код / Платная|
| Traefik     |✓|✓|✓|Открытый исходный код|
| HAProxy     |✓|✓|✓|Открытый исходный код|
| API Gateway (AWS) |✓|✓|✓|Платная|
| Azure API   |✓|✓|✓|Платная|
| Tyk         |✓|✓|✓|Открытый исходный код / Платная


На основе анализа возможностей и требований, я бы рекомендовал использовать Kong в качестве решения для API Gateway. Вот обоснование моего выбора:  

1) Функциональность: Kong полностью соответствует всем заявленным требованиям - поддерживает маршрутизацию запросов, аутентификацию и терминацию HTTPS.  

2) Открытый исходный код: Kong распространяется под лицензией Apache 2.0, что позволяет использовать его бесплатно и модифицировать при необходимости.  

3) Расширяемость: Kong имеет богатую экосистему плагинов, что позволяет легко добавлять новую функциональность.  

4) Производительность: Kong построен на базе NGINX, что обеспечивает высокую производительность и надежность.  

5) Популярность и поддержка сообщества: Kong имеет большое и активное сообщество, что гарантирует постоянное развитие продукта и доступность ресурсов для решения возможных проблем.  

6) Простота интеграции: Kong легко интегрируется с различными системами оркестрации контейнеров, такими как Kubernetes, что важно для микросервисной архитектуры.  

7) Масштабируемость: Kong хорошо масштабируется, что критично для растущих систем на основе микросервисов.  

Таким образом, Kong представляется оптимальным выбором, сочетающим в себе необходимую функциональность, гибкость и экономическую эффективность для реализации API Gateway в микросервисной архитектуре.  


### Задание 2 Брокер сообщений

Составьте таблицу возможностей различных брокеров сообщений. На основе таблицы сделайте обоснованный выбор решения.

Решение должно соответствовать следующим требованиям:

- поддержка кластеризации для обеспечения надёжности,
- хранение сообщений на диске в процессе доставки,
- высокая скорость работы,
- поддержка различных форматов сообщений,
- разделение прав доступа к различным потокам сообщений,
- простота эксплуатации.

Обоснуйте свой выбор.

Для выбора оптимального брокера сообщений я составил сравнительную таблицу возможностей различных решений:


|Возможности    |RabbitMQАутентификация|Apache Kafka|ActiveMQ| NATS| Redis | 
|-------------|----------------------|--------------|----------------|----------------------|--------|
| Поддержка кластеризации     |  +|+|+|+|+|
| Хранение сообщений на диске     |  +|+|+|+|+|
| Высокая скорость работы     |  +-|+|-|+|+|
| Поддержка форматов сообщений    |AMQP, MQTT, STOMP|Binary через TCP Socket|AMQP, MQTT, REST и др.|NATS Streaming Protocol| RESP|
| Разделение прав доступа |  +|+|+|+|+|
| Простота эксплуатации |  +|-|+|+|+|

На основе анализа возможностей и требований, я рекомендую использовать **RabbitMQ** в качестве брокера сообщений. Вот обоснование выбора:  

1) Кластеризация: RabbitMQ поддерживает кластеризацию, обеспечивая надежность системы.

2) Хранение на диске: Сообщения могут храниться на диске, что гарантирует их сохранность при сбоях.

3) Скорость работы: Хотя RabbitMQ немного уступает Kafka в скорости, он все еще обеспечивает высокую производительность, достаточную для большинства задач.

4) Поддержка форматов: RabbitMQ поддерживает множество протоколов (AMQP, MQTT, STOMP), что делает его гибким в использовании.

5) Разделение прав доступа: Предоставляет гибкие механизмы управления доступом.

6) Простота эксплуатации: RabbitMQ известен своей простотой в настройке и управлении, что важно для быстрого развертывания и поддержки.

7) Популярность и поддержка: RabbitMQ широко распространен, имеет большое сообщество и хорошую документацию.

8) Интеграция: Легко интегрируется с различными языками программирования и фреймворками.

   
Дополнительные соображения:

- Характер нагрузки не полностью я понял из задания. Если объем сообщений очень велик, возможно, стоит рассмотреть Apache Kafka.
- RabbitMQ подходит как для связи между микросервисами, так и для интеграции с внешними системами.
- Его "универсальность" делает его хорошим выбором для различных сценариев использования.
Таким образом, **RabbitMQ** представляется оптимальным выбором, сочетающим в себе необходимую функциональность, простоту использования и гибкость для реализации брокера сообщений в микросервисной архитектуре.
























































